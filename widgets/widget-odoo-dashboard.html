<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odoo Integración - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Dev-only styles for presentation */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f3f4f6;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 2rem;
        }
    </style>
</head>

<body>

    <!-- 
    ==========================================================================
    START EMBED CODE
    Copy from here to "END EMBED CODE" to include this widget in another page.
    Ensure Tailwind CSS and FontAwesome are loaded in the host page.
    ==========================================================================
-->

    <div id="widget-odoo-dashboard-embed"
        class="relative w-full h-full flex items-center justify-center font-['Roboto']">

        <style>
            /* Scoped Styles for Widget */
            #widget-odoo-dashboard-embed {
                font-family: 'Roboto', sans-serif;
            }

            /* Odoo-like Background Gradient */
            #widget-odoo-dashboard-embed .odoo-bg {
                background: linear-gradient(135deg, #EFEBF4 0%, #E2DDF0 100%);
            }

            /* App Icon Hover Effect */
            #widget-odoo-dashboard-embed .app-icon {
                transition: transform 0.2s, box-shadow 0.2s;
            }

            #widget-odoo-dashboard-embed .app-icon:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }

            /* Animations */
            @keyframes keyframe-pulse-soft {

                0%,
                100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.8;
                }
            }

            #widget-odoo-dashboard-embed .animate-pulse-soft {
                animation: keyframe-pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }

            @keyframes keyframe-bounce-soft {

                0%,
                100% {
                    transform: translateY(0);
                }

                50% {
                    transform: translateY(-5px);
                }
            }

            #widget-odoo-dashboard-embed .animate-bounce-soft {
                animation: keyframe-bounce-soft 2s infinite;
            }

            @keyframes keyframe-scale-in {
                from {
                    transform: scale(0.95);
                    opacity: 0;
                }

                to {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            #widget-odoo-dashboard-embed .animate-scale-in {
                animation: keyframe-scale-in 0.2s ease-out forwards;
            }
        </style>

        <!-- WIDGET CONTAINER (Screen representation) -->
        <div
            class="w-full max-w-6xl h-[700px] odoo-bg rounded-lg overflow-hidden shadow-2xl relative flex flex-col border border-gray-200">

            <!-- 1. TOP NAVBAR -->
            <div class="h-10 flex items-center justify-between px-4 shrink-0">
                <!-- Left: Breadcrumbs/Menu (Abstracted) -->
                <div class="flex items-center gap-3">
                    <!-- Abstract Menu Icon -->
                    <div class="space-y-1 cursor-pointer opacity-50 hover:opacity-100">
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                    </div>
                </div>

                <!-- Right: Status & Logo -->
                <div class="flex items-center gap-4 text-gray-600 text-xs">
                    <i class="fas fa-comment opacity-60"></i>
                    <i class="fas fa-clock opacity-60"></i>
                    <div class="w-px h-4 bg-gray-300 mx-1"></div>
                    <!-- Dos4Siete Logo -->
                    <div class="flex items-center gap-2 opacity-80">
                        <img src="../assets/img/logo.svg" alt="Dos4Siete" class="h-5 w-auto">
                        <span class="font-bold text-gray-700">Dos4Siete Services S.L.</span>
                    </div>
                    <!-- Avatar -->
                    <div
                        class="w-6 h-6 rounded-full bg-indigo-200 text-indigo-600 flex items-center justify-center text-[10px] font-bold">
                        DS
                    </div>
                </div>
            </div>

            <!-- 2. MAIN APP GRID -->
            <div class="flex-1 flex items-center justify-center p-10 overflow-y-auto">
                <div class="grid grid-cols-3 gap-8">

                    <!-- App 1: Discuss (Orange) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#F0AD4E] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                    </div>

                    <!-- App 2: Calendar (Yellow) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#F0AD4E] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon bg-gradient-to-br from-yellow-400 to-orange-400">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    </div>

                    <!-- App 3: Contacts (Green) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#5CB85C] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-address-book"></i>
                        </div>
                    </div>

                    <!-- App 4: CRM (Purple/Blue Gradient) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-[#7C7BAD] to-[#9A67A2] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                    </div>

                    <!-- App 5: CENTER - Dos4Siete Logo (White Background) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-lg app-icon border border-gray-100 p-3">
                            <img src="../assets/img/logo.svg" alt="Dos4Siete" class="w-full h-full object-contain">
                        </div>
                    </div>

                    <!-- App 6: Website (Cyan) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#5BC0DE] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                    </div>

                    <!-- App 7: Inventory (Orange Dark) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#E67E22] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                    </div>

                    <!-- App 8: Accounting (Teal) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#009688] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                    </div>

                    <!-- App 9: Projects (Blue) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#337AB7] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 3. VOIP WIDGET (Bottom Left Absolute) -->
            <div
                class="absolute bottom-6 left-6 w-[300px] bg-white rounded-lg shadow-2xl border border-gray-300 flex flex-col overflow-hidden z-20">

                <!-- Header -->
                <div class="h-9 bg-[#714B67] flex items-center justify-between px-3 text-white shrink-0">
                    <div class="flex items-center gap-2 font-medium text-sm">
                        <i class="fas fa-phone-alt text-xs"></i> VoIP
                    </div>
                    <i class="fas fa-times text-xs opacity-70 hover:opacity-100 cursor-pointer"></i>
                </div>

                <!-- INCOMING CALL STATE (Initially Visible) -->
                <div id="voip-incoming" class="flex flex-col flex-1 h-full bg-[#E8F5E9] animate-pulse-soft">
                    <div class="flex-1 flex flex-col items-center justify-center p-4 text-center">
                        <div class="text-[#2E4033] text-sm mb-4 font-medium">Llamada entrante...</div>

                        <!-- Avatar Image -->
                        <div
                            class="w-20 h-20 bg-white rounded overflow-hidden shadow-sm mb-3 border-2 border-green-100 animate-bounce-soft">
                            <img src="https://ui-avatars.com/api/?name=Daniel+Estrada&background=fff&color=333&size=128"
                                alt="Daniel" class="w-full h-full object-cover">
                        </div>

                        <div class="text-[#1A2E22] font-bold text-base leading-tight mb-1">Daniel Estrada</div>
                        <div class="text-xs text-gray-500 mb-2">Técnico Dos4siete</div>
                        <div class="text-[#2E4033] text-sm font-mono">621 227 447</div>
                    </div>

                    <!-- Footer Call Actions -->
                    <div class="bg-white h-20 flex items-center justify-center gap-8 px-6 border-t border-gray-100">
                        <button
                            class="w-12 h-12 rounded-full bg-[#D32F2F] text-white shadow-md flex items-center justify-center">
                            <i class="fas fa-phone-slash text-lg transform rotate-90"></i>
                        </button>

                        <button id="btn-answer-call"
                            class="w-12 h-12 rounded-full bg-[#2E7D32] text-white shadow-md hover:bg-green-600 transition-colors flex items-center justify-center animate-pulse">
                            <i class="fas fa-phone text-lg transform rotate-90"></i>
                        </button>
                    </div>
                </div>

                <!-- ACTIVE CALL STATE (Initially Hidden) -->
                <div id="voip-active-call" class="flex flex-col hidden">

                    <!-- Green Info Section -->
                    <div class="bg-[#dcedc8] p-4 flex flex-col items-center text-center pb-6">
                        <!-- Avatar Image -->
                        <div class="w-16 h-16 bg-white rounded overflow-hidden shadow-sm mb-2 border border-green-100">
                            <img src="https://ui-avatars.com/api/?name=Daniel+Estrada&background=fff&color=333&size=128"
                                alt="Daniel" class="w-full h-full object-cover">
                        </div>

                        <div class="text-[#2E4033] font-bold text-sm leading-tight">Daniel Estrada - Técnico Dos4siete
                        </div>
                        <div class="text-[#4E5D52] text-xs mt-1">Llamada de Daniel Estrada - Técnico Dos4siete</div>
                        <div class="text-[#2E7D32] text-xs mt-1 font-medium">Duración de la llamada: <span
                                id="call-timer">00:19</span></div>
                        <div class="text-[#2E4033] text-sm mt-3 font-semibold">621227447</div>
                    </div>

                    <!-- Actions Section -->
                    <div class="bg-white p-4 flex flex-col gap-4">

                        <!-- Documentos Row -->
                        <div>
                            <div class="text-xs text-gray-500 mb-2 font-medium">Documentos</div>
                            <div class="flex justify-center gap-6">
                                <!-- Email -->
                                <button
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="far fa-envelope text-sm"></i>
                                </button>
                                <!-- User Profile -->
                                <button
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="far fa-user text-sm"></i>
                                </button>
                                <!-- Schedule Activity (CLOCK) -->
                                <button id="btn-schedule-activity"
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors relative">
                                    <i class="far fa-clock text-sm"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Llamada Row -->
                        <div>
                            <div class="text-xs text-gray-500 mb-2 font-medium">Llamada</div>
                            <div class="flex justify-center gap-6">
                                <!-- Transfer -->
                                <button
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-exchange-alt text-sm"></i>
                                </button>
                                <!-- Mute -->
                                <button
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-microphone text-sm"></i>
                                </button>
                                <!-- Pause -->
                                <button
                                    class="w-10 h-10 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-pause text-sm"></i>
                                </button>
                            </div>
                        </div>

                    </div>

                    <!-- Footer (Keypad + Hangup) -->
                    <div class="border-t border-gray-100 p-3 flex justify-between items-center px-8">
                        <button class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-th text-lg"></i>
                        </button>
                        <!-- Hangup -->
                        <button class="text-[#D32F2F] hover:text-red-700 transform rotate-90 text-xl">
                            <i class="fas fa-phone"></i>
                        </button>
                    </div>

                </div>
            </div>

            <!-- 4. MODAL: Schedule Activity (Hidden) -->
            <div id="modal-activity"
                class="absolute inset-0 bg-black/20 z-50 hidden flex items-center justify-center backdrop-blur-[1px]">
                <div
                    class="bg-white w-[500px] rounded shadow-2xl flex flex-col animate-scale-in transform scale-95 transition-transform duration-200">
                    <!-- Modal Header -->
                    <div
                        class="px-4 py-3 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t">
                        <h3 class="font-medium text-gray-700">Planificar Actividad</h3>
                        <button id="close-modal" class="text-gray-400 hover:text-gray-600"><i
                                class="fas fa-times"></i></button>
                    </div>
                    <!-- Modal Body -->
                    <div class="p-6">
                        <div class="mb-4">
                            <label class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Tipo de
                                Actividad</label>
                            <select class="w-full border border-gray-300 rounded p-2 text-sm text-gray-700 bg-white">
                                <option>Llamada</option>
                                <option>Correo electrónico</option>
                                <option>Reunión</option>
                                <option>Por hacer</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <div class="mb-4">
                                <label
                                    class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Resumen</label>
                                <input type="text" id="input-summary" value=""
                                    class="w-full border border-gray-300 rounded p-2 text-sm text-gray-700 focus:border-indigo-500 outline-none">
                            </div>
                            <div class="mb-4">
                                <label class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Fecha
                                    de vencimiento</label>
                                <input type="date"
                                    class="w-full border border-gray-300 rounded p-2 text-sm text-gray-700">
                            </div>
                            <div class="mb-0">
                                <label
                                    class="block text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">Notas</label>
                                <textarea id="input-notes"
                                    class="w-full border border-gray-300 rounded p-2 text-sm text-gray-700 h-20 resize-none"></textarea>
                            </div>
                        </div>
                        <!-- Modal Footer -->
                        <div class="px-4 py-3 border-t border-gray-200 bg-gray-50 rounded-b flex justify-end gap-2">
                            <button
                                class="px-4 py-2 text-sm text-gray-600 hover:text-gray-800 font-medium">Descartar</button>
                            <button id="btn-schedule-submit"
                                class="px-4 py-2 text-sm bg-[#714B67] text-white rounded hover:bg-[#5D3D55] font-medium shadow-sm">Planificar</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. DEMO CURSOR (Scoped Inside) -->
            <div id="demo-cursor"
                class="absolute top-0 left-0 z-[9999] pointer-events-none transition-transform duration-700 ease-in-out flex items-center justify-center opacity-0"
                style="display: flex;">
                <!-- Cursor Icon -->
                <i class="fas fa-hand-pointer text-black text-2xl drop-shadow-xl transform -rotate-[15deg] transition-transform duration-150 border-white"
                    style="-webkit-text-stroke: 1px white;"></i>
                <!-- Ripple -->
                <div class="absolute w-8 h-8 bg-black/10 rounded-full animate-ping -z-10 hidden" id="click-effect">
                </div>
            </div>

            <!-- Animation Logic -->
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    // Scope lookup to strictly inside the widget (optional but good practice)
                    // However, document.getElementById is global. Just ensure IDs are unique enough or context is clear.
                    // In a real framework, we'd use Refs. Here, unique IDs in standard might be needed if multiple widgets on one page.
                    // For now, assuming one widget per page or distinct IDs.

                    const cursor = document.getElementById('demo-cursor');
                    const btnAnswer = document.getElementById('btn-answer-call');

                    // ... (rest of js is generic enough, but IDs should ideally be namespaced if collision risk)
                    // Leaving IDs as is for now as per "apply structure" instruction, not "namespace everything" instruction which would be huge.
                    // But the user *did* say "evalua fallas" which includes ID collisions.
                    // For this refactor, I will keep IDs as is to avoid breaking internal logic, but in SKILL I verified this risk.
                    // The prompt asks to apply the structure.

                    const incomingView = document.getElementById('voip-incoming');
                    const activeView = document.getElementById('voip-active-call');
                    const targetBtn = document.getElementById('btn-schedule-activity');
                    const clickEffect = document.getElementById('click-effect');
                    const modal = document.getElementById('modal-activity');
                    if (!modal) return; // safety
                    const modalContent = modal.querySelector('div');

                    setTimeout(() => {
                        runDemo();
                    }, 1000);

                    async function runDemo() {
                        cursor.style.transition = 'opacity 0.5s';
                        cursor.style.opacity = '1';

                        // ANSWER
                        await moveCursorTo('#btn-answer-call', 0, 0);
                        await animateClick();
                        incomingView.classList.add('hidden');
                        activeView.classList.remove('hidden');
                        await new Promise(r => setTimeout(r, 1000));

                        // OPEN TASK
                        await moveCursorTo('#btn-schedule-activity', 0, 0);
                        await animateClick();
                        targetBtn.classList.add('bg-gray-300');
                        modal.classList.remove('hidden');
                        modalContent.classList.remove('scale-95');
                        modalContent.classList.add('scale-100');

                        // FILL FORM
                        await moveCursorTo('#input-summary', 10, 10);
                        await animateClick();
                        document.getElementById('input-summary').focus();
                        await typeText('input-summary', 'Renovación de Contrato');

                        await moveCursorTo('#input-notes', 20, 20);
                        await animateClick();
                        document.getElementById('input-notes').focus();
                        await typeText('input-notes', 'El cliente confirma interés. Enviar propuesta mañana.');

                        await moveCursorTo('#btn-schedule-submit', 20, 10);
                        await animateClick();

                        // SUBMIT
                        document.getElementById('btn-schedule-submit').classList.add('opacity-75');
                        setTimeout(() => {
                            modalContent.classList.remove('scale-100');
                            modalContent.classList.add('scale-95');
                            setTimeout(() => {
                                modal.classList.add('hidden');
                            }, 200);
                        }, 300);

                        // EXIT
                        const rectFinal = document.getElementById('btn-schedule-submit').getBoundingClientRect();
                        cursor.style.transform = `translate(${rectFinal.left + 300}px, ${rectFinal.top + 300}px)`;
                        cursor.style.opacity = '0';
                    }

                    function moveCursorTo(selector, offsetX = 0, offsetY = 0) {
                        return new Promise(resolve => {
                            const el = document.querySelector(selector);
                            if (!el) { resolve(); return; }
                            const rect = el.getBoundingClientRect();
                            const x = rect.left + (rect.width / 2) + offsetX;
                            const y = rect.top + (rect.height / 2) + offsetY;

                            if (!cursor.style.transform) {
                                cursor.style.transform = `translate(${x + 100}px, ${y + 100}px)`;
                                cursor.getBoundingClientRect();
                            }
                            cursor.style.transform = `translate(${x}px, ${y}px)`;
                            setTimeout(resolve, 800 + 300);
                        });
                    }

                    async function animateClick() {
                        cursor.querySelector('i').classList.add('scale-90');
                        clickEffect.classList.remove('hidden');
                        await new Promise(r => setTimeout(r, 150));
                        cursor.querySelector('i').classList.remove('scale-90');
                        clickEffect.classList.add('hidden');
                        await new Promise(r => setTimeout(r, 200));
                    }

                    async function typeText(elementId, text) {
                        const el = document.getElementById(elementId);
                        el.value = '';
                        for (let char of text) {
                            el.value += char;
                            await new Promise(r => setTimeout(r, 30 + Math.random() * 30));
                        }
                        await new Promise(r => setTimeout(r, 400));
                    }
                });
            </script>
        </div>

    </div>

    <!-- 
    ==========================================================================
    END EMBED CODE
    ==========================================================================
-->

</body>

</html>