<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odoo Integración - Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Dev-only styles for presentation */
        /* Dev-only styles for presentation */
        html,
        body {
            background-color: transparent !important;
        }

        /* Dev-only centering for Absolute Pattern */
        html,
        body {
            height: 100vh;
            width: 100vw;
            background-color: transparent !important;
            overflow: hidden;
            /* Prevent scrollbars */
            position: relative;
            /* Context */
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>

<body>

    <!-- 
    ==========================================================================
    START EMBED CODE
    Copy from here to "END EMBED CODE" to include this widget in another page.
    Ensure Tailwind CSS and FontAwesome are loaded in the host page.
    ==========================================================================
-->

    <div id="widget-odoo-dashboard-embed" class="relative w-full h-full font-['Roboto'] overflow-hidden">

        <style>
            /* Scoped Styles for Widget */
            #widget-odoo-dashboard-embed {
                font-family: 'Roboto', sans-serif;
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100vh;
                /* Force full viewport height */
                margin: 0;
                padding: 0;
                overflow: hidden;
            }

            /* Odoo-like Background Gradient */
            #widget-odoo-dashboard-embed .odoo-bg {
                background: linear-gradient(135deg, #EFEBF4 0%, #E2DDF0 100%);
            }

            /* App Icon Hover Effect */
            #widget-odoo-dashboard-embed .app-icon {
                transition: transform 0.2s, box-shadow 0.2s;
            }

            #widget-odoo-dashboard-embed .app-icon:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }

            /* Animations */
            @keyframes keyframe-pulse-soft {

                0%,
                100% {
                    opacity: 1;
                }

                50% {
                    opacity: 0.8;
                }
            }

            #widget-odoo-dashboard-embed .animate-pulse-soft {
                animation: keyframe-pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            }

            @keyframes keyframe-bounce-soft {

                0%,
                100% {
                    transform: translateY(0);
                }

                50% {
                    transform: translateY(-5px);
                }
            }

            #widget-odoo-dashboard-embed .animate-bounce-soft {
                animation: keyframe-bounce-soft 2s infinite;
            }

            @keyframes keyframe-scale-in {
                from {
                    transform: scale(0.95);
                    opacity: 0;
                }

                to {
                    transform: scale(1);
                    opacity: 1;
                }
            }

            #widget-odoo-dashboard-embed .animate-scale-in {
                animation: keyframe-scale-in 0.2s ease-out forwards;
            }
        </style>

        <!-- WIDGET CONTAINER (Screen representation) -->
        <!-- WIDGET CONTAINER (Screen representation) -->
        <div id="main-app-container"
            class="relative w-[900px] h-[900px] odoo-bg rounded-lg overflow-hidden shadow-lg flex flex-col border border-gray-200 shrink-0">

            <!-- 1. TOP NAVBAR -->
            <div class="h-10 flex items-center justify-between px-4 shrink-0">
                <!-- Left: Breadcrumbs/Menu (Abstracted) -->
                <div class="flex items-center gap-3">
                    <!-- Abstract Menu Icon -->
                    <div class="space-y-1 cursor-pointer opacity-50 hover:opacity-100">
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                        <div class="w-4 h-0.5 bg-gray-600"></div>
                    </div>
                </div>

                <!-- Right: Status & Logo -->
                <div class="flex items-center gap-4 text-gray-600 text-xs">
                    <i class="fas fa-comment opacity-60"></i>
                    <i class="fas fa-clock opacity-60"></i>
                    <div class="w-px h-4 bg-gray-300 mx-1"></div>
                    <!-- Dos4Siete Logo -->
                    <div class="flex items-center gap-2 opacity-80">
                        <img src="../assets/img/logo.svg" alt="Dos4Siete" class="h-5 w-auto">
                        <span class="font-bold text-gray-700">Dos4Siete Services S.L.</span>
                    </div>
                    <!-- Avatar -->
                    <div
                        class="w-6 h-6 rounded-full bg-indigo-200 text-indigo-600 flex items-center justify-center text-[10px] font-bold">
                        DS
                    </div>
                </div>
            </div>

            <!-- 2. MAIN APP GRID -->
            <div class="flex-1 flex items-center justify-center p-10 overflow-y-auto">
                <div class="grid grid-cols-3 gap-8">

                    <!-- App 1: Discuss (Orange) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#F0AD4E] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                    </div>

                    <!-- App 2: Calendar (Yellow) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#F0AD4E] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon bg-gradient-to-br from-yellow-400 to-orange-400">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    </div>

                    <!-- App 3: Contacts (Green) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#5CB85C] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-address-book"></i>
                        </div>
                    </div>

                    <!-- App 4: CRM (Purple/Blue Gradient) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-[#7C7BAD] to-[#9A67A2] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                    </div>

                    <!-- App 5: CENTER - Dos4Siete Logo (White Background) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-white rounded-xl flex items-center justify-center shadow-lg app-icon border border-gray-100 p-3">
                            <img src="../assets/img/logo.svg" alt="Dos4Siete" class="w-full h-full object-contain">
                        </div>
                    </div>

                    <!-- App 6: Website (Cyan) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#5BC0DE] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                    </div>

                    <!-- App 7: Inventory (Orange Dark) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#E67E22] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-boxes"></i>
                        </div>
                    </div>

                    <!-- App 8: Accounting (Teal) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#009688] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                    </div>

                    <!-- App 9: Projects (Blue) -->
                    <div class="flex flex-col items-center gap-2 cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-[#337AB7] rounded-xl flex items-center justify-center text-white text-3xl shadow-sm app-icon">
                            <i class="fas fa-project-diagram"></i>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 3. VOIP WIDGET (Bottom Left Absolute) -->
            <div
                class="absolute bottom-6 left-6 w-[380px] bg-white rounded-lg shadow-2xl border border-gray-300 flex flex-col overflow-hidden z-20">

                <!-- Header -->
                <div class="h-12 bg-[#714B67] flex items-center justify-between px-4 text-white shrink-0">
                    <div class="flex items-center gap-2 font-medium text-base">
                        <i class="fas fa-phone-alt text-sm"></i> VoIP
                    </div>
                    <i class="fas fa-times text-xs opacity-70 hover:opacity-100 cursor-pointer"></i>
                </div>

                <!-- INCOMING CALL STATE (Initially Visible) -->
                <div id="voip-incoming" class="flex flex-col flex-1 h-full bg-[#E8F5E9] animate-pulse-soft">
                    <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
                        <div class="text-[#2E4033] text-base mb-6 font-medium">Llamada entrante...</div>

                        <!-- Avatar Image -->
                        <div
                            class="w-24 h-24 bg-white rounded overflow-hidden shadow-sm mb-4 border-2 border-green-100 animate-bounce-soft">
                            <img src="https://ui-avatars.com/api/?name=Daniel+Estrada&background=fff&color=333&size=128"
                                alt="Daniel" class="w-full h-full object-cover">
                        </div>

                        <div class="text-[#1A2E22] font-bold text-xl leading-tight mb-2">Daniel Estrada</div>
                        <div class="text-sm text-gray-500 mb-3">Técnico Dos4siete</div>
                        <div class="text-[#2E4033] text-base font-mono">621 227 447</div>
                    </div>

                    <!-- Footer Call Actions -->
                    <div class="bg-white h-24 flex items-center justify-center gap-10 px-8 border-t border-gray-100">
                        <button
                            class="w-14 h-14 rounded-full bg-[#D32F2F] text-white shadow-md flex items-center justify-center">
                            <i class="fas fa-phone-slash text-xl transform rotate-90"></i>
                        </button>

                        <button id="btn-answer-call"
                            class="w-14 h-14 rounded-full bg-[#2E7D32] text-white shadow-md hover:bg-green-600 transition-colors flex items-center justify-center animate-pulse">
                            <i class="fas fa-phone text-xl transform rotate-90"></i>
                        </button>
                    </div>
                </div>

                <!-- ACTIVE CALL STATE (Initially Hidden) -->
                <div id="voip-active-call" class="flex flex-col hidden">

                    <!-- Green Info Section -->
                    <div class="bg-[#dcedc8] p-6 flex flex-col items-center text-center pb-8">
                        <!-- Avatar Image -->
                        <div class="w-20 h-20 bg-white rounded overflow-hidden shadow-sm mb-3 border border-green-100">
                            <img src="https://ui-avatars.com/api/?name=Daniel+Estrada&background=fff&color=333&size=128"
                                alt="Daniel" class="w-full h-full object-cover">
                        </div>

                        <div class="text-[#2E4033] font-bold text-base leading-tight">Daniel Estrada - Técnico Dos4siete
                        </div>
                        <div class="text-[#4E5D52] text-sm mt-2">Llamada de Daniel Estrada - Técnico Dos4siete</div>
                        <div class="text-[#2E7D32] text-sm mt-2 font-medium">Duración de la llamada: <span
                                id="call-timer">00:19</span></div>
                        <div class="text-[#2E4033] text-base mt-4 font-semibold">621227447</div>
                    </div>

                    <!-- Actions Section -->
                    <div class="bg-white p-6 flex flex-col gap-6">

                        <!-- Documentos Row -->
                        <div>
                            <div class="text-sm text-gray-500 mb-3 font-medium">Documentos</div>
                            <div class="flex justify-center gap-8">
                                <!-- Email -->
                                <button
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="far fa-envelope text-base"></i>
                                </button>
                                <!-- User Profile -->
                                <button
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="far fa-user text-base"></i>
                                </button>
                                <!-- Schedule Activity (CLOCK) -->
                                <button id="btn-schedule-activity"
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors relative">
                                    <i class="far fa-clock text-base"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Llamada Row -->
                        <div>
                            <div class="text-sm text-gray-500 mb-3 font-medium">Llamada</div>
                            <div class="flex justify-center gap-8">
                                <!-- Transfer -->
                                <button
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-exchange-alt text-base"></i>
                                </button>
                                <!-- Mute -->
                                <button
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-microphone text-base"></i>
                                </button>
                                <!-- Pause -->
                                <button
                                    class="w-12 h-12 rounded-full bg-gray-200 text-gray-600 flex items-center justify-center hover:bg-gray-300 transition-colors">
                                    <i class="fas fa-pause text-base"></i>
                                </button>
                            </div>
                        </div>

                    </div>

                    <!-- Footer (Keypad + Hangup) -->
                    <div class="border-t border-gray-100 p-4 flex justify-between items-center px-10">
                        <button class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-th text-2xl"></i>
                        </button>
                        <!-- Hangup -->
                        <button class="text-[#D32F2F] hover:text-red-700 transform rotate-90 text-2xl">
                            <i class="fas fa-phone"></i>
                        </button>
                    </div>

                </div>
            </div>

            <!-- 4. MODAL: Schedule Activity (Hidden) -->
            <div id="modal-activity"
                class="absolute inset-0 bg-black/20 z-50 hidden flex items-center justify-center backdrop-blur-[1px]">
                <div
                    class="bg-white w-[600px] rounded xl shadow-2xl flex flex-col animate-scale-in transform scale-95 transition-transform duration-200">
                    <!-- Modal Header -->
                    <div
                        class="px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t">
                        <h3 class="font-medium text-lg text-gray-700">Planificar Actividad</h3>
                        <button id="close-modal" class="text-gray-400 hover:text-gray-600 text-xl"><i
                                class="fas fa-times"></i></button>
                    </div>
                    <!-- Modal Body -->
                    <div class="p-8">
                        <div class="mb-5">
                            <label class="block text-sm font-bold text-gray-500 uppercase tracking-wide mb-2">Tipo de
                                Actividad</label>
                            <select class="w-full border border-gray-300 rounded p-3 text-base text-gray-700 bg-white">
                                <option>Llamada</option>
                                <option>Correo electrónico</option>
                                <option>Reunión</option>
                                <option>Por hacer</option>
                            </select>
                        </div>
                        <div class="mb-5">
                            <div class="mb-5">
                                <label
                                    class="block text-sm font-bold text-gray-500 uppercase tracking-wide mb-2">Resumen</label>
                                <input type="text" id="input-summary" value=""
                                    class="w-full border border-gray-300 rounded p-3 text-base text-gray-700 focus:border-indigo-500 outline-none">
                            </div>
                            <div class="mb-5">
                                <label class="block text-sm font-bold text-gray-500 uppercase tracking-wide mb-2">Fecha
                                    de vencimiento</label>
                                <input type="date"
                                    class="w-full border border-gray-300 rounded p-3 text-base text-gray-700">
                            </div>
                            <div class="mb-0">
                                <label
                                    class="block text-sm font-bold text-gray-500 uppercase tracking-wide mb-2">Notas</label>
                                <textarea id="input-notes"
                                    class="w-full border border-gray-300 rounded p-3 text-base text-gray-700 h-28 resize-none"></textarea>
                            </div>
                        </div>
                        <!-- Modal Footer -->
                        <div
                            class="px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b flex justify-end gap-3 mt-4">
                            <button
                                class="px-5 py-2.5 text-base text-gray-600 hover:text-gray-800 font-medium">Descartar</button>
                            <button id="btn-schedule-submit"
                                class="px-5 py-2.5 text-base bg-[#714B67] text-white rounded hover:bg-[#5D3D55] font-medium shadow-sm">Planificar</button>
                        </div>
                    </div>
                </div>
            </div>



        </div>

        <!-- 5. DEMO CURSOR (Scoped Inside) -->
        <div id="demo-cursor"
            class="absolute top-0 left-0 z-[9999] pointer-events-none transition-transform duration-700 ease-in-out flex items-center justify-center opacity-0"
            style="display: flex;">
            <!-- Cursor Icon -->
            <i class="fas fa-hand-pointer text-black text-2xl drop-shadow-xl transform -rotate-[15deg] transition-transform duration-150 border-white"
                style="-webkit-text-stroke: 1px white;"></i>
            <!-- Ripple -->
            <div class="absolute w-8 h-8 bg-black/10 rounded-full animate-ping -z-10 hidden" id="click-effect">
            </div>
        </div>

        <!-- Animation Logic -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const cursor = document.getElementById('demo-cursor');
                const incomingView = document.getElementById('voip-incoming');
                const activeView = document.getElementById('voip-active-call');
                const targetBtn = document.getElementById('btn-schedule-activity');
                const clickEffect = document.getElementById('click-effect');
                const modal = document.getElementById('modal-activity');

                if (!modal) return;
                const modalContent = modal.querySelector('div');

                // Start loop
                setTimeout(runDemo, 1000);

                async function runDemo() {
                    // --- RESET STATE ---
                    // 1. Reset Views
                    incomingView.classList.remove('hidden');
                    activeView.classList.add('hidden');
                    modal.classList.add('hidden');
                    modalContent.classList.remove('scale-100');
                    modalContent.classList.add('scale-95');

                    // 2. Reset Buttons & Inputs
                    targetBtn.classList.remove('bg-gray-300');
                    document.getElementById('btn-schedule-submit').classList.remove('opacity-75');
                    document.getElementById('input-summary').value = '';
                    document.getElementById('input-notes').value = '';

                    // 3. Reset Cursor Position (Start from center-ish or off-screen)
                    cursor.style.transition = 'none'; // Snap
                    cursor.style.opacity = '0';
                    cursor.style.transform = 'translate(600px, 400px)'; // Center start

                    await new Promise(r => setTimeout(r, 100));
                    cursor.style.transition = 'transform 0.8s ease-in-out, opacity 0.5s';
                    cursor.style.opacity = '1';

                    // --- ANIMATION SEQUENCE ---

                    // STEP 1: ANSWER CALL
                    await moveCursorTo('#btn-answer-call', 0, 0);
                    await animateClick();
                    incomingView.classList.add('hidden');
                    activeView.classList.remove('hidden');
                    await new Promise(r => setTimeout(r, 1500)); // Talk for a bit

                    // STEP 2: OPEN SCHEDULE ACTIVITY
                    await moveCursorTo('#btn-schedule-activity', 0, 0);
                    await animateClick();
                    targetBtn.classList.add('bg-gray-300');
                    modal.classList.remove('hidden');
                    // Modal Enter Animation
                    setTimeout(() => {
                        modalContent.classList.remove('scale-95');
                        modalContent.classList.add('scale-100');
                    }, 50);
                    await new Promise(r => setTimeout(r, 1000));

                    // STEP 3: TYPE SUMMARY
                    await moveCursorTo('#input-summary', 40, 10); // Clic inside input
                    await animateClick();
                    // document.getElementById('input-summary').focus(); // Removed to prevent scroll jumps
                    await typeText('input-summary', 'Renovación de Contrato');
                    await new Promise(r => setTimeout(r, 500));

                    // STEP 4: TYPE NOTES
                    await moveCursorTo('#input-notes', 40, 20);
                    await animateClick();
                    // document.getElementById('input-notes').focus(); // Removed to prevent scroll jumps
                    await typeText('input-notes', 'Cliente satisfecho. Enviar propuesta.');
                    await new Promise(r => setTimeout(r, 500));

                    // STEP 5: SUBMIT
                    await moveCursorTo('#btn-schedule-submit', 30, 15);
                    await animateClick();
                    document.getElementById('btn-schedule-submit').classList.add('opacity-75');

                    // Close Modal Animation
                    setTimeout(() => {
                        modalContent.classList.remove('scale-100');
                        modalContent.classList.add('scale-95');
                        setTimeout(() => {
                            modal.classList.add('hidden');
                        }, 200);
                    }, 400);

                    // STEP 6: HANGUP (Optional, or just loop)
                    // Let's move cursor away and restart
                    await new Promise(r => setTimeout(r, 1500));

                    // Exit cursor
                    const rectFinal = document.getElementById('btn-schedule-submit').getBoundingClientRect();
                    cursor.style.opacity = '0';

                    // RESTART LOOP
                    setTimeout(runDemo, 2000);
                }

                // --- HELPERS ---

                function moveCursorTo(selector, offsetX = 0, offsetY = 0) {
                    return new Promise(resolve => {
                        const el = document.querySelector(selector);
                        if (!el) { resolve(); return; }
                        const rect = el.getBoundingClientRect();

                        // Since cursor is fixed/absolute to viewport (or body behaving as viewport),
                        // and getBoundingClientRect returns viewport coordinates,
                        // we just use rect.left and rect.top directly.

                        const x = rect.left + (rect.width / 2) + offsetX;
                        const y = rect.top + (rect.height / 2) + offsetY;

                        cursor.style.transform = `translate(${x}px, ${y}px)`;
                        setTimeout(resolve, 800 + 400); // Duration + pause
                    });
                }

                async function animateClick() {
                    const icon = cursor.querySelector('i');
                    icon.classList.add('scale-75'); // Press effect
                    clickEffect.classList.remove('hidden');
                    await new Promise(r => setTimeout(r, 150));
                    icon.classList.remove('scale-75');
                    clickEffect.classList.add('hidden');
                    await new Promise(r => setTimeout(r, 200));
                }

                async function typeText(elementId, text) {
                    const el = document.getElementById(elementId);
                    el.value = '';
                    for (let char of text) {
                        el.value += char;
                        el.dispatchEvent(new Event('input', { bubbles: true }));
                        await new Promise(r => setTimeout(r, 30 + Math.random() * 30));
                    }
                }
            });
        </script>

        <!-- 
    ==========================================================================
    END EMBED CODE
    ==========================================================================
-->

        <script>
            // --- SCALING LOGIC ---
            // --- SCALING LOGIC ---
            function scaleToFit() {
                const container = document.getElementById('main-app-container');
                if (!container) return;

                // Original dimensions
                const baseWidth = 900;
                const baseHeight = 900;
                const marginBuffer = 60; // Moderate margin

                // Available space
                const windowWidth = document.documentElement.clientWidth || window.innerWidth;
                const windowHeight = document.documentElement.clientHeight || window.innerHeight;

                // Calculate scales
                const scaleX = (windowWidth - marginBuffer) / baseWidth;
                const scaleY = (windowHeight - marginBuffer) / baseHeight;

                // Use the smaller scale to fit entirely
                let scale = Math.min(scaleX, scaleY);

                // Apply scale ONLY (Flexbox handles centering)
                container.style.transform = `scale(${scale})`;

                // Ensure body allows centering but prevents scroll if content fits
                document.body.style.height = '100vh';
                document.documentElement.style.overflow = 'hidden';
            }
            window.addEventListener('resize', scaleToFit);
            document.addEventListener('DOMContentLoaded', scaleToFit);
        </script>
</body>

</html>