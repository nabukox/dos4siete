<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Locuciones - Dos Siete</title>
    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Dev dependencies -->
    <link rel="stylesheet" href="../assets/css/dos4siete-core.css">
    <script src="../assets/js/dos4siete-widgets.js"></script>
    <style>
        /* Dev-only centering for Absolute Pattern */
        html,
        body {
            height: 100vh;
            width: 100vw;
            background-color: transparent !important;
            overflow: hidden;
            /* Prevent scrollbars */
            position: relative;
            /* Context */
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Outfit', sans-serif;
            display: block;
        }
    </style>
</head>

<body>

    <!-- 
    ==========================================================================
    START EMBED CODE
    Copy from here to "END EMBED CODE" to include this widget in another page.
    Ensure Tailwind CSS and FontAwesome are loaded in the host page.
    
    IMPORTANT: This widget depends on local assets:
    - css/dos4siete-core.css
    - js/dos4siete-widgets.js
    ==========================================================================
-->

    <!-- Dependencies for Embed -->
    <link rel="stylesheet" href="../assets/css/dos4siete-core.css">
    <script src="../assets/js/dos4siete-widgets.js"></script>

    <div id="widget-locuciones-embed" class="relative w-full h-full font-['Outfit']">

        <style>
            /* Scoped Styles */
            #widget-locuciones-embed {
                font-family: 'Outfit', sans-serif;
            }

            /* Custom Scrollbar scoped */
            #widget-locuciones-embed .custom-scrollbar::-webkit-scrollbar {
                width: 6px;
            }

            #widget-locuciones-embed .custom-scrollbar::-webkit-scrollbar-track {
                background: #f1f1f1;
            }

            #widget-locuciones-embed .custom-scrollbar::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 3px;
            }

            #widget-locuciones-embed .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
            }

            /* Cursor Animation Styles */
            #demo-cursor {
                transition: top 0.8s cubic-bezier(0.25, 1, 0.5, 1), left 0.8s cubic-bezier(0.25, 1, 0.5, 1), transform 0.2s;
                z-index: 9999;
                pointer-events: none;
                position: fixed;
            }

            /* Success Modal Animation */
            @keyframes successPop {
                0% {
                    opacity: 0;
                    transform: scale(0.9) translateY(20px);
                }

                100% {
                    opacity: 1;
                    transform: scale(1) translateY(0);
                }
            }

            .animate-success-pop {
                animation: successPop 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            }
        </style>

        <!-- APP CONTAINER -->
        <!-- Base Width: 800px -->
        <div id="main-app-container"
            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[800px] h-[700px] flex flex-col bg-white overflow-hidden shadow-lg rounded-3xl border border-gray-100">

            <!-- HEADER -->
            <div
                class="app-header flex justify-between items-center px-6 py-5 bg-white border-b border-gray-100 z-10 shrink-0">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-microphone-alt text-[#141F4C]"></i>
                        <h2 class="text-[#141F4C] font-bold text-xl">Locuciones</h2>
                    </div>
                    <span class="text-xs text-gray-400 pl-6">Gestiona los audios del sistema</span>
                </div>

                <button id="btn-new-voiceover"
                    class="bg-[#29ABE2] hover:bg-[#2376C9] text-white text-sm font-bold py-2 px-6 rounded-full shadow-sm hover:shadow-md transition-all flex items-center gap-2 group">
                    <i class="fas fa-plus text-xs group-hover:scale-110 transition-transform"></i>
                    Nueva locución
                </button>
            </div>

            <!-- MAIN CONTENT (GRID) -->
            <div class="p-6 bg-[#F9FAFB] overflow-y-auto custom-scrollbar h-full flex flex-col justify-center">
                <div class="grid grid-cols-2 lg:grid-cols-2 gap-6 place-content-center h-full">

                    <!-- CARD 1 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate" title="04/12 Murcia">04/12
                                Murcia</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"
                                    title="Eliminar"><i class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"
                                    title="Descargar"><i class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"
                                    title="Editar"><i class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"
                                    title="Reproducir"><i class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 2 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate" title="11/12 MAD">11/12
                                MAD</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 3 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate"
                                title="31/12 VAL-BAR-MUR FUERA HORARIO">31/12 VAL-BAR-MUR FUE...</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 4 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate">Bienvenida</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 5 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate">Buzón Festivos</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 6 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate">Agentes ocupados (espere)</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 7 -->
                    <div
                        class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span class="text-gray-700 font-medium text-sm truncate">Buzón día especial</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>

                    <!-- CARD 8 (Placeholder for New Record) -->
                    <div id="new-record-card"
                        class="hidden bg-white p-4 rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow flex flex-col gap-4">
                        <div class="flex items-center gap-3">
                            <i class="fas fa-robot text-gray-500 text-lg"></i>
                            <span id="new-record-title" class="text-gray-700 font-medium text-sm truncate">Fuera Horario
                                5/1 BCN</span>
                        </div>
                        <div class="flex items-center justify-between mt-auto">
                            <div class="flex gap-1.5">
                                <button
                                    class="w-8 h-8 rounded bg-[#EF4444] text-white flex items-center justify-center hover:bg-red-600 transition-colors"><i
                                        class="fas fa-trash-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#22C55E] text-white flex items-center justify-center hover:bg-green-600 transition-colors"><i
                                        class="fas fa-download text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-[#3B82F6] text-white flex items-center justify-center hover:bg-blue-600 transition-colors"><i
                                        class="fas fa-pencil-alt text-xs"></i></button>
                                <button
                                    class="w-8 h-8 rounded bg-gray-100 text-gray-600 border border-gray-200 flex items-center justify-center hover:bg-gray-200 transition-colors"><i
                                        class="fas fa-music text-xs"></i></button>
                            </div>
                            <i class="fas fa-info-circle text-blue-400 text-xs cursor-help"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MODAL OVERLAY (Inside the Embed Scope) -->
            <div id="locucion-modal"
                class="hidden absolute inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm transition-opacity opacity-0">
                <!-- Modal Content -->
                <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 transform scale-95 transition-transform duration-200"
                    id="locucion-modal-content">

                    <!-- Modal Header -->
                    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-100">
                        <h3 class="text-[#141F4C] font-bold text-lg">Locución</h3>
                        <button class="text-gray-400 hover:text-gray-600 transition-colors" id="btn-close-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <!-- Modal Body -->
                    <div class="p-6 space-y-5">

                        <!-- Name Input -->
                        <div class="space-y-1.5">
                            <label class="block text-xs font-bold text-gray-700 uppercase tracking-wide">Nombre</label>
                            <input id="input-name" type="text"
                                class="w-full px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                placeholder="Ej: Bienvenida Navidad">
                        </div>

                        <!-- TTS Section -->
                        <div class="space-y-1.5">
                            <label class="block text-xs font-bold text-gray-700 uppercase tracking-wide">Texto
                                automático</label>
                            <div class="relative">
                                <textarea id="tts-input" rows="4"
                                    class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-lg text-sm text-gray-800 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none"
                                    placeholder="Escribe el texto que se convertirá en audio..."></textarea>
                                <div class="absolute bottom-2 right-3 text-[10px] text-gray-400 font-medium">
                                    <span id="char-count">0</span> / 2000
                                </div>
                            </div>
                        </div>

                        <!-- Voice Selector & Preview -->
                        <div class="flex items-center gap-3">
                            <button
                                class="w-10 h-10 rounded-lg bg-blue-500 hover:bg-blue-600 text-white flex items-center justify-center transition-colors shadow-sm disabled:opacity-50 disabled:cursor-not-allowed">
                                <i class="fas fa-play text-xs pl-0.5"></i>
                            </button>
                            <div class="flex-1">
                                <select
                                    class="w-full px-3 py-2 bg-white border border-gray-200 rounded-lg text-sm text-gray-700 focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer">
                                    <option>Castilian Spanish [neural] - Female - Lucia</option>
                                    <option>Castilian Spanish [neural] - Male - Enrique</option>
                                    <option>Mexican Spanish [neural] - Female - Dalia</option>
                                </select>
                            </div>
                        </div>

                        <!-- Alternative Actions -->
                        <div class="flex flex-col gap-2 pt-2 border-t border-gray-50">
                            <button
                                class="flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium py-1 w-fit group">
                                <i class="fas fa-microphone text-xs group-hover:scale-110 transition-transform"></i>
                                Grabar con el micrófono
                            </button>
                            <button
                                class="flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium py-1 w-fit group">
                                <i class="fas fa-upload text-xs group-hover:scale-110 transition-transform"></i>
                                Subir un fichero de audio
                            </button>
                        </div>

                    </div>

                    <!-- Modal Footer -->
                    <div class="px-6 py-4 bg-gray-50 rounded-b-2xl border-t border-gray-100 flex justify-end gap-3">
                        <button id="btn-cancel-modal"
                            class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors">
                            Cancelar
                        </button>
                        <button id="btn-save-modal"
                            class="px-6 py-2 text-sm font-bold text-white bg-[#29ABE2] hover:bg-[#2376C9] rounded-full shadow-md hover:shadow-lg transition-all transform active:scale-95">
                            <i class="fas fa-check mr-1.5"></i> Guardar
                        </button>
                    </div>

                </div>
            </div>

            <!-- SUCCESS MODAL (Demo End) -->
            <div id="success-modal"
                class="hidden absolute inset-0 z-[100] flex flex-col items-center justify-center bg-[#141F4C]/90 backdrop-blur-sm transition-opacity opacity-0 text-center p-8">
                <!-- Content Container for Animation -->
                <div id="success-content" class="flex flex-col items-center">
                    <div
                        class="w-20 h-20 bg-[#22C55E] rounded-full flex items-center justify-center mb-6 shadow-lg shadow-green-500/30 animate-bounce">
                        <i class="fas fa-check text-3xl text-white"></i>
                    </div>
                    <h2 class="text-white text-3xl font-bold mb-4">¡Así de fácil!</h2>
                    <p class="text-blue-100 text-lg max-w-sm leading-relaxed">
                        Personaliza la experiencia de tus clientes en segundos con <span
                            class="text-white font-bold">Dos4Siete</span>.
                    </p>
                </div>
            </div>
        </div>

        <!-- CURSOR ELEMENT -->
        <div id="demo-cursor" class="fixed top-0 left-0 hidden items-center justify-center">
            <!-- Pointer Icon -->
            <i class="fas fa-hand-pointer text-gray-800 text-3xl drop-shadow-xl border-white"
                style="-webkit-text-stroke: 1px white;"></i>
        </div>

        <!-- Init Script + Automation -->
        <script>
            // --- SCALING LOGIC ---
            function scaleToFit() {
                const container = document.getElementById('main-app-container');
                if (!container) return;

                const baseWidth = 800;
                const marginBuffer = 40;

                const windowWidth = document.documentElement.clientWidth || window.innerWidth;

                let scale = Math.min(windowWidth / (baseWidth + marginBuffer), 1);

                container.style.transform = `translate(-50%, -50%) scale(${scale})`;

                document.body.style.height = '100vh';
                document.documentElement.style.overflow = 'hidden';
            }
            window.addEventListener('resize', scaleToFit);
            document.addEventListener('DOMContentLoaded', scaleToFit);

            // --- AUTOMATION SCRIPT ---

            const cursor = document.getElementById('demo-cursor');
            const sleep = ms => new Promise(r => setTimeout(r, ms));

            async function moveCursorTo(selector, offsetX = 0, offsetY = 0) {
                const el = document.querySelector(selector);
                if (!el) return;
                const rect = el.getBoundingClientRect();

                // Show cursor if hidden
                cursor.classList.remove('hidden');
                cursor.classList.add('flex');

                const targetX = rect.left + rect.width / 2 + offsetX;
                const targetY = rect.top + rect.height / 2 + offsetY;

                cursor.style.left = `${targetX}px`;
                cursor.style.top = `${targetY}px`;

                await sleep(900); // Wait for movement to complete
            }

            async function clickElement(selector) {
                const el = document.querySelector(selector);
                if (!el) return;

                // Visual Click
                cursor.style.transform = 'scale(0.8)';
                await sleep(150);
                cursor.style.transform = 'scale(1)';

                // Actual Click Logic (Trigger whatever onClick is bound, or standard behavior)
                // For this widget, we might need to manually trigger logic if it's not bound
                // But let's assume the standard initialization or manual logic below defines behavior
                el.click();
                await sleep(500); // Post click pause
            }

            async function typeText(selector, text) {
                const el = document.querySelector(selector);
                if (!el) return;

                // el.focus(); // Removed to prevent scroll jumps on parent page
                el.value = ''; // Clear first to reset animation

                for (let char of text) {
                    el.value += char;
                    // Trigger input event for listeners
                    el.dispatchEvent(new Event('input', { bubbles: true }));
                    await sleep(Math.random() * 50 + 30); // Random typing speed
                }
                await sleep(500);
            }

            // --- WIDGET LOGIC (Normally in dos4siete-widgets.js, but overriding/ensuring here for demo) ---

            const modal = document.getElementById('locucion-modal');
            const modalContent = document.getElementById('locucion-modal-content');

            function openModal() {
                modal.classList.remove('hidden');
                // Force reflow
                void modal.offsetWidth;
                modal.classList.remove('opacity-0');
                modal.classList.add('active'); // Helper class if used
            }

            function closeModal() {
                modal.classList.add('opacity-0');
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    // Reset inputs
                    document.getElementById('input-name').value = '';
                    document.getElementById('tts-input').value = '';
                }, 300);
            }

            // Bind Events manually to ensure Automation works even if external JS isn't perfect
            document.getElementById('btn-new-voiceover').addEventListener('click', openModal);
            document.getElementById('btn-close-modal').addEventListener('click', closeModal);
            document.getElementById('btn-cancel-modal').addEventListener('click', closeModal);
            // Save just closes for demo
            document.getElementById('btn-save-modal').addEventListener('click', () => {
                // Simulate saving processing?
                closeModal();
            });


            async function runDemoLoop() {
                while (true) { // Infinite Loop

                    // 0. Wait Initial
                    await sleep(1500);

                    // 1. Click New Voiceover
                    await moveCursorTo('#btn-new-voiceover');
                    await sleep(300);
                    await clickElement('#btn-new-voiceover');

                    // 2. Wait for modal
                    await sleep(1000);

                    // 3. Click Name Input
                    await moveCursorTo('#input-name');
                    await clickElement('#input-name');

                    // 4. Type Name
                    await typeText('#input-name', 'Bienvenida Verano 2024');

                    // 5. Click TTS Area
                    await moveCursorTo('#tts-input');
                    await clickElement('#tts-input');

                    // 6. Type TTS
                    await typeText('#tts-input', '¡Hola! Gracias por llamar a Dos4Siete. Estamos encantados de atenderle. Por favor espere.');

                    // 7. Click Save
                    await moveCursorTo('#btn-save-modal');
                    await sleep(500);
                    await clickElement('#btn-save-modal');

                    // 8. SHOW NEW RECORD (Simulating backend update)
                    await sleep(500); // Short delay after close
                    const newCard = document.getElementById('new-record-card');
                    const newCardTitle = document.getElementById('new-record-title');
                    if (newCard && newCardTitle) {
                        newCardTitle.innerText = 'Bienvenida Verano 2024';
                        newCard.classList.remove('hidden');
                        newCard.classList.remove('flex'); // Remove flex if added by toggle
                        newCard.classList.add('flex'); // Ensure flex is back
                        newCard.classList.add('slide-in-new'); // Add entry animation
                    }

                    // 9. Show Success Message
                    await sleep(800);
                    const successModal = document.getElementById('success-modal');
                    const successContent = document.getElementById('success-content');

                    if (successModal) {
                        successModal.classList.remove('hidden');
                        // Force reflow for fade
                        void successModal.offsetWidth;
                        successModal.classList.remove('opacity-0');

                        // Trigger Pop Animation on Content
                        if (successContent) {
                            successContent.classList.remove('animate-success-pop'); // Reset if needed
                            void successContent.offsetWidth; // Force reflow
                            successContent.classList.add('animate-success-pop');
                        }
                    }

                    // 10. Wait for reading
                    await sleep(4000);

                    // RESET for Loop
                    if (successModal) {
                        successModal.classList.add('opacity-0');
                        await sleep(500); // Fade out time
                        successModal.classList.add('hidden');
                    }

                    if (newCard) {
                        newCard.classList.add('hidden');
                        newCard.classList.remove('flex');
                        newCard.classList.remove('slide-in-new');
                    }

                    // Loop continues...
                }
            }

            // Start Demo on Load (delayed)
            document.addEventListener('DOMContentLoaded', () => {
                // Initial cursor position (off screen or somewhere safe)
                cursor.style.left = '90%';
                cursor.style.top = '90%';
                setTimeout(runDemoLoop, 1500);
            });

        </script>
    </div>

    <!-- 
    ==========================================================================
    END EMBED CODE
    ==========================================================================
-->

</body>

</html>